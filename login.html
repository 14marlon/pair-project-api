<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Metro Shopping</title>
    <link rel="stylesheet" href="style.css">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha2/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-aFq/bzH65dt+w6FI2ooMVUpc+21e0SRygnTpmBvdBgSdnuTN7QbdgL+OapgHtvPp" crossorigin="anonymous">
    <style>
        .hidden{
            display: none;
        }
        .header {
            height: 10vh;
        }
        .login-container{
            width: 50vh;
            margin-left: 60%;
        }
        .register-container{
            width: 70vh;
            margin-left: 60%;
        }
    </style>
</head>
<body>
    <header>
        <div class="container header">
            <div class ="logo"></div>
            <div><h1>Login Page</h1></div>
        </div>
    </header>
    <!-- LOGIN SECTION -->
    <div class="container login-container text-center page" id="login">
        <p class="mt-3">Not yet registered? <a onclick="navigate('register')" id="signup">Sign up</a></p>
        <div class="form-floating mb-3">
            <input type="email" name="email-address" id="floatingInput" class="form-control" placeholder="name@example.com" required>
            <label for="floatingInput">Email</label>
        </div>
        <div class="form-floating">
            <input type="password" class="form-control " id="floatingPassword" placeholder="Password" required>
            <label for="floatingPassword">Password</label>
          </div>
        <div class="d-flex justify-content-center"><button type="submit" value="Login" class="btn btn-primary mt-3" name="login" id="login">Login</button></a></div>
        
    </div>
<!-- REGISTER SECTION -->
    <div class="register-container hidden page" id="register" >
        <div class="text-center "><a onclick="navigate('login')" class="link-primary text-center">Go to login page</a></div>
        <div class="bg-light p-3 mt-3 w-75 m-auto">
            <form action="#" method="#" onsubmit="alertSuccess()">
                <Fieldset>
                    <legend>Login Details<span class="text-danger fs-6">(all fields should be required)</span>
                    </legend>
                    <div>
                        <label for="email-address" class="form-label">Email</label>
                        <input type="email" name="email-address" id="email-address" class="form-control">
                        <span id="email-address-error" class="text-danger fs-6 d-none form-error"></span>
                    </div>
                    <div>
                        <label for="password" class="form-label">Password</label>
                        <input type="password" name="password" id="password" class="form-control">
                        <span id="password-error" class="text-danger fs-6 d-none form-error"></span>
                    </div>
                    <div>
                        <label for="confirm-password" class="form-label">Confirm Password</label>
                        <input type="password" name="confirm-password" id="confirm-password"
                        class="form-control">
                    </div>
                </fieldset>
                <fieldset>
                    <legend>User Details</legend>
                    <div >
                        <label for="first-name">First Name</label>
                        <input type="text" name="first-name" id="first-name" class="form-control">
                        <span id="first-name-error" class="text-danger fs-6 d-none form-error"></span>
                    </div>
                    <div >
                       <label for="last-name">Last Name</label>
                        <input type="text" name="last-name" id="last-name" class="form-control">
                        <span id="last-name-error" class="text-danger fs-6 d-none form-error"></span>
                    </div>
                    <div >
                        <label for="age" class="form-label">Age</label>
                        <input type="number" name="age" id="age" class="form-control" min="18">
                        <span id="age-error" class="text-danger fs-6 d-none form-error"></span>
                    </div>
                </fieldset>
                <div class="text-center form-check mt-2">
                    <input type="checkbox" name="terms" id="terms" class="form-check-input">
                    <label for="terms" class="form-check-label">I accept the terms & conditions</label>
                    <span id="terms-error" class="text-danger fs-6 d-none form-error"></span>
                </div>
                <div class="text-center"><input type="button" onclick="validateForm()" class="btn btn-primary mx-auto mt-3" value="Submit"></div>
            </form>
        </div>
</div>

    <script src="script.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha2/dist/js/bootstrap.bundle.min.js"
        integrity="sha384-qKXV1j0HvMUeCBQ+QVp7JcfGl760yU08IQ+GpUo5hlbpg51QRiuqHAJz8+BrxE/N"
        crossorigin="anonymous"></script>
        <script>

console.log(history)
    window.history.replaceState({ page: 'home' }, 'home', '#home');

function updateContent(pageName) {
      // hide all pages
      const pages = document.getElementsByClassName('page');
      for (let p of pages) {
        p.classList.add('hidden');
      }

      // show current page
      const currentPage = document.getElementById(pageName);
      currentPage.classList.remove('hidden');

    }
    function navigate(pageName) {
      // Push the new state onto the history stack
      window.history.pushState({ page: pageName }, pageName, `#${pageName}`);

      updateContent(pageName);
    }

    window.addEventListener('popstate', function (e) {
      if (e.state) {
        updateContent(e.state.page);
      }
    });  


            //FORM VALIDATION REGISTRATION PAGE
          

        function validateForm() {
            let hasError = false;
            //RESET ERROR
            const formErrors= document.getElementsByClassName('form-error');
            for(let fe of formErrors) {
                fe.textContent = '';
                fe.classList.add('d-none');
            }
            //  EMAIL VALIDATION
            const emailAddressInput = document.getElementById('email-address');
            if (emailAddressInput.value === '') {
                const emailAddressError = document.getElementById('email-address-error');
                emailAddressError.classList.remove('d-none');
                emailAddressError.textContent = 'Email address is required';
                hasError = true;
            }
            //PASSWORD VALIDATION
            let passwordErrorText = '';
            const passwordError = document.getElementById('password-error');
            const passwordInput = document.getElementById('password');
            if (passwordInput.value === '') {
                passwordError.classList.remove('d-none');
                passwordErrorText += 'Password is required\n';
                hasError = true;
            } else if (passwordInput.value.length < 8) {
                passwordError.classList.remove('d-none');
                passwordErrorText += 'Password must contain at least 8 characters\n';
                hasError = true;
            }
            const confirmPasswordInput = document.getElementById('confirm-password');
            if (passwordInput.value !== confirmPasswordInput.value) {
                passwordError.classList.remove('d-none');
                passwordErrorText += 'Password did not match';
                hasError = true;
            }

            passwordError.textContent = passwordErrorText;

            const firstNameInput = document.getElementById('first-name');
            if (firstNameInput.value === '') {
                const firstNameError = document.getElementById('first-name-error');
                firstNameError.classList.remove('d-none');
                firstNameError.textContent = 'First name is required';
                hasError = true;
            }
                const lastNameInput = document.getElementById('last-name');
            if (lastNameInput.value === '') {
                const lastNameError = document.getElementById('last-name-error');
                lastNameError.classList.remove('d-none');
                lastNameError.textContent = 'Last name is required';
                hasError = true;
            }

            //AGE VALIDATION
            const age = document.getElementById('age');
            if (age.value < 18) {
                const ageError = document.getElementById('age-error');
                ageError.classList.remove('d-none');
                ageError.textContent = 'User Should be 18 years old and above';
                hasError = true;
            }
            const terms = document.getElementById('terms');
            const termsError = document.getElementById('terms-error');
            if (!terms.checked ) {
                termsError.textContent = 'Please agree to the terms and conditions'
                termsError.classList.remove('d-none');
                hasError = true;
               }
            
               if (!hasError) {
                alertSuccess();
            } else {
                window.scrollTo(0, 0);
            }
        }
        function alertSuccess() {
            alert('Successfully registered!');
            }

        //FORM VALIDATION LOGIN PAGE
        function valicateLogin(){

        }
        </script>
</body>
</html>